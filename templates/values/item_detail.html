{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="item-detail-page">
    <div class="item-detail-back">
        <a href="{% url 'values:item_list' %}" class="back-link">
            <i class="bi bi-arrow-left"></i>
            <span>Back to Items</span>
        </a>
    </div>

    <div class="row g-4">
        <!-- Left Column - Item Details -->
        <div class="col-12 col-lg-4">
            <div class="item-detail-sidebar">
                <div class="item-detail-header-section">
                    <div class="item-detail-icon" style="background: {{ item.category.color }}20; color: {{ item.category.color }};">
                        <i class="bi bi-box"></i>
                    </div>
                    <div class="item-detail-title-group">
                        <h1 class="item-detail-title">{{ item.name }}</h1>
                        <div class="item-detail-category">{{ item.category.name|upper }} â€¢ {{ item.get_item_type_display|upper }}</div>
                    </div>
                </div>

                <div class="item-detail-badge-section">
                    <span class="rarity-badge-large rarity-{{ item.rarity }}">{{ item.get_rarity_display|upper }}</span>
                </div>

                <div class="item-detail-stats">
                    <div class="stat-item">
                        <div class="stat-label">RARITY</div>
                        <div class="stat-value rarity-{{ item.rarity }}-text">{{ item.get_rarity_display }}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">VALUE</div>
                        <div class="stat-value-large">
                            <span>{{ item.value|floatformat:0 }}</span>
                            {% if item.trend == "rising" %}
                                <span class="trend-indicator trend-up"><i class="bi bi-arrow-up"></i> Rising</span>
                            {% elif item.trend == "falling" %}
                                <span class="trend-indicator trend-down"><i class="bi bi-arrow-down"></i> Falling</span>
                            {% else %}
                                <span class="trend-indicator trend-stable"><i class="bi bi-dash"></i> Stable</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">DEMAND</div>
                            <div class="stat-value">
                            <div class="demand-stars">
                                {% with star_count=item.get_star_count %}
                                    {% for i in "12345"|make_list %}
                                        {% if forloop.counter <= star_count %}
                                            <i class="bi bi-star-fill star-filled"></i>
                                        {% else %}
                                            <i class="bi bi-star star-empty"></i>
                                        {% endif %}
                                    {% endfor %}
                                {% endwith %}
                            </div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">TRADEABLE</div>
                        <div class="stat-value">Yes</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">LIMITED</div>
                        <div class="stat-value">{{ item.is_limited|yesno:"Yes,No" }}</div>
                    </div>
                </div>

                <div class="item-detail-status">
                    <div class="status-badge active">
                        <i class="bi bi-check-circle"></i>
                        <span>Active</span>
                    </div>
                    <div class="status-text">This item is currently active and tradeable in the market.</div>
                </div>
            </div>
        </div>

        <!-- Right Column - Item Image -->
        <div class="col-12 col-lg-8">
            <div class="item-detail-image-section">
                {% if item.image_url %}
                    <div class="item-detail-image-wrapper">
                        <div class="item-detail-image-container">
                            <img src="{{ item.image_url }}" alt="{{ item.name }}" class="item-detail-main-image">
                        </div>
                        <div class="item-detail-image-overlay">
                            <div class="image-enlarge-hint">
                                <i class="bi bi-zoom-in"></i>
                                <span>Click to enlarge</span>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="item-detail-image-container no-image-large">
                        <i class="bi bi-image"></i>
                        <div class="image-enlarge-hint">No image available</div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Bottom Section - Additional Info -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="item-detail-info-section">
                {% if item.obtained_from %}
                <div class="info-block">
                    <h3 class="info-block-title">ORIGIN</h3>
                    <p class="info-block-content">{{ item.obtained_from }}</p>
                </div>
                {% endif %}
                {% if item.notes %}
                <div class="info-block">
                    <h3 class="info-block-title">DESCRIPTION</h3>
                    <p class="info-block-content">{{ item.notes }}</p>
                </div>
                {% endif %}
                <div class="info-block">
                    <h3 class="info-block-title">HISTORY</h3>
                    <p class="info-block-content">
                        Added {{ item.created_at|date:"M d, Y" }}. Last updated {{ item.updated_at|date:"M d, Y H:i" }}.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

